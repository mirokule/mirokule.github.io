<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Unity, iOS, Swift, ML" />










<meta name="description" content="万人迷">
<meta property="og:type" content="website">
<meta property="og:title" content="Gate of Babylon">
<meta property="og:url" content="http://mirokule.github.io/index.html">
<meta property="og:site_name" content="Gate of Babylon">
<meta property="og:description" content="万人迷">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Gate of Babylon">
<meta name="twitter:description" content="万人迷">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://mirokule.github.io/"/>





  <title>Gate of Babylon</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Gate of Babylon</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不积跬步，无以至千里</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/04/30/Torch-Module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/30/Torch-Module/" itemprop="url">torch.nn.Module</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-30T09:29:49+08:00">
                2020-04-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  593
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>class torch.nn.Module 是所有网络的基类。<br>当自定义模型时，模型应该继承这个类。</p>
<h4 id="Module类"><a href="#Module类" class="headerlink" title="Module类"></a>Module类</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import torch.nn as nn</span><br><span class="line">import torch.nn.functional as F</span><br><span class="line"></span><br><span class="line">class Model(nn.Module):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super(Model, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(1,20,5)</span><br><span class="line">        self.conv2 = nn.Conv2d(20,20,5)</span><br><span class="line"></span><br><span class="line">    def forward(self, x):</span><br><span class="line">        x = F.relu(self.conv1(x))</span><br><span class="line">        return F.relu(self.conv2(x))</span><br></pre></td></tr></table></figure>
<p>前馈函数定义后，反向传播函数将自动通过autograd定义。<br>Module中除了添加层，也可以添加另一个moudule，通过children()查看。<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Model, self).__init__()</span><br><span class="line">        self.add_module(<span class="string">"conv1"</span>, nn.Conv2d(<span class="number">10</span>,<span class="number">20</span>,<span class="number">4</span>))</span><br><span class="line">        self.add_module(<span class="string">"conv2"</span>, nn.Conv2d(<span class="number">20</span>,<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">model = Model()</span><br><span class="line"><span class="keyword">for</span> sub_module <span class="keyword">in</span> model.children():</span><br><span class="line">    print(sub_module)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回所有模块</span></span><br><span class="line"><span class="keyword">for</span> module <span class="keyword">in</span> model.modules():</span><br><span class="line">    print(module)</span><br></pre></td></tr></table></figure></p>
<p>模型可训练的参数通过调用net.parameters()返回。</p>
<h4 id="Module子类"><a href="#Module子类" class="headerlink" title="Module子类"></a>Module子类</h4><p>除了自定义模型外，PyTorch也实现了一些继承自Module的方便构建模型的类。</p>
<h5 id="Sequential"><a href="#Sequential" class="headerlink" title="Sequential"></a>Sequential</h5><p>前向计算为简单串联各个层，逐一添加一系列子模块。<br>模块之间有先后顺序，可以通过中括号[]访问任意层。<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">net = Sequential(</span><br><span class="line">    nn.Linear(<span class="number">784</span>, <span class="number">256</span>),</span><br><span class="line">    nn.ReLU(),</span><br><span class="line">    nn.Linear(<span class="number">256</span>, <span class="number">10</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></p>
<h5 id="ModuleList"><a href="#ModuleList" class="headerlink" title="ModuleList"></a>ModuleList</h5><p>接收一个子模块的列表作为输入，可以append操作。<br>列表中的模块之间没有顺序，需要自己实现forward功能。<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">net = nn.ModuleList([nn.Linear(<span class="number">784</span>, <span class="number">256</span>), nn.ReLU()])</span><br><span class="line">net.append(nn.Linear(<span class="number">256</span>,<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModule</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(MyModule, self).__init__()</span><br><span class="line">        self.linears = nn.ModuleList([nn.Linear(<span class="number">10</span>,<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i,l <span class="keyword">in</span> enumerate(self.linears):</span><br><span class="line">            x = self.linears[i //<span class="number">2</span>](x) + l(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure></p>
<h5 id="ModuleDict"><a href="#ModuleDict" class="headerlink" title="ModuleDict"></a>ModuleDict</h5><p>接收一个子模块的字典作为输入，也可以执行类似字典的操作。<br>同ModuleList一样没有定义forward，需要自己实现。<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">net = nn.ModuleDict(&#123;</span><br><span class="line">    <span class="string">'linear'</span>: nn.Linear(<span class="number">784</span>, <span class="number">256</span>),</span><br><span class="line">    <span class="string">'act'</span>: nn.ReLU(),</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">net[<span class="string">'output'</span>] = nn.Linear(<span class="number">256</span>, <span class="number">10</span>) <span class="comment"># 添加</span></span><br><span class="line">print(net[<span class="string">'linear'</span>]) <span class="comment"># 访问</span></span><br></pre></td></tr></table></figure></p>
<h4 id="自定义层"><a href="#自定义层" class="headerlink" title="自定义层"></a>自定义层</h4><p>除了定义模型之外，Module类也可以用于自定义层。</p>
<h5 id="无参数层"><a href="#无参数层" class="headerlink" title="无参数层"></a>无参数层</h5><p>层的计算定义写在forward函数里。<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CenteredLayer</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(CenteredLayer, self).__init__()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x - x.mean()</span><br><span class="line"></span><br><span class="line">net = nn.Sequential(nn.Linear(<span class="number">8</span>,<span class="number">128</span>), CenteredLayer())</span><br></pre></td></tr></table></figure></p>
<h5 id="有参数层"><a href="#有参数层" class="headerlink" title="有参数层"></a>有参数层</h5><p>将参数定义成Parameter，它会自动添加到模型的参数列表。<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDense</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(MyDense, self).__init__()</span><br><span class="line">        self.params = nn.ParameterList([nn.Parameter(torch.randn(<span class="number">4</span>,<span class="number">4</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)]) <span class="comment"># 3个4*4</span></span><br><span class="line">        self.params.append(nn.Parameter(torch.randn(<span class="number">4</span>,<span class="number">1</span>))) <span class="comment"># 1个4*1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(self.params)):</span><br><span class="line">            x = torch.mm(x, self.params[i])</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/04/27/Torch-Tensor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/27/Torch-Tensor/" itemprop="url">Tensor</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-27T16:32:10+08:00">
                2020-04-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  538
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Tensor是PyTorch的基础数据存储工具，和Numpy的多维数组类似。<br>标量是0维张量，如3；<br>向量是1维张量，如[3,5]；<br>矩阵是2维张量，如[[3,5],[2,4]].</p>
<h4 id="创建、读取"><a href="#创建、读取" class="headerlink" title="创建、读取"></a>创建、读取</h4><p>1.创建<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接赋值</span></span><br><span class="line">x = torch.tensor([<span class="number">5.5</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定内容</span></span><br><span class="line">x = torch.empty(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line">x = torch.rand(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line">x = torch.zeros(<span class="number">5</span>,<span class="number">3</span>, dtype=torch.long)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据现有</span></span><br><span class="line">x = torch.randn_like(x, dtype=torch.float)</span><br><span class="line">x = x.new_ones(<span class="number">5</span>,<span class="number">3</span>, dtype=torch.float64)</span><br></pre></td></tr></table></figure></p>
<p>2.读取<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取形状</span></span><br><span class="line">x.size()</span><br><span class="line">x.shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改变形状</span></span><br><span class="line">y = x.view(<span class="number">15</span>)</span><br><span class="line">z = x.view(<span class="number">-1</span>,<span class="number">5</span>) <span class="comment"># -1代表该维度由其他维度推断</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引</span></span><br><span class="line">y = x[<span class="number">0</span>, :]</span><br></pre></td></tr></table></figure></p>
<p>索引与原数据共享内存，修改时同步改变；<br>改变形状同样共享内存。<br>如果要申请新内存，应使用clone创造副本。<br>clone会被记录在计算图中，当梯度回传到副本时也会传到源。<br>可以使用id()函数查看内存地址。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_cp = x.clone().view(<span class="number">15</span>)</span><br><span class="line">print(id(x))</span><br><span class="line">print(id(x_cp))</span><br></pre></td></tr></table></figure>
<h4 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h4><p>1.加法<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.ones(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line">y = torch.rand(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 几种不同形式</span></span><br><span class="line">result = x+y</span><br><span class="line">result = torch.add(x,y)</span><br><span class="line">torch.add(x,y, out=result)</span><br><span class="line">y.add_(x) <span class="comment"># inplace方法名称都有后缀_</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用原内存空间</span></span><br><span class="line">y[:] = y+x</span><br><span class="line">torch.add(x,y,out=y)</span><br></pre></td></tr></table></figure></p>
<p>加法会使用新内存，即y=x+y运算后y指向新开辟的内存区间。<br>如果要使用原有的内存，应该用索引：y[:] = y+x</p>
<p>加法同样有广播机制：当两个张量的形状不同时，将适当复制元素使两个张量形状相同后再按元素运算。</p>
<p>2.线性代数<br>trace：对角线元素之和，矩阵的迹<br>diag：对角线元素<br>t：转置<br>inverse：逆矩阵<br>dot/cross：内积/外积<br>svd：奇异值分解</p>
<h4 id="梯度"><a href="#梯度" class="headerlink" title="梯度"></a>梯度</h4><p>如果将属性.requires_grad设置为True，则对tensor的所有操作会被跟踪。<br>调用.backward()时，所有梯度将自动计算，并累积到.grad属性中。</p>
<p>要停止跟踪tensor，应调用.detach()，或者将代码块用 with toch.no_grad()包装起来。</p>
<h4 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 转换成Python Number</span></span><br><span class="line">x = torch.randn(<span class="number">1</span>)</span><br><span class="line">print(x) <span class="comment"># tensor</span></span><br><span class="line">print(x.item()) <span class="comment"># number</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tensor转numpy</span></span><br><span class="line">x = torch.ones(<span class="number">5</span>)</span><br><span class="line">y = x.numpy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># numpy转tensor</span></span><br><span class="line">x = np.ones(<span class="number">5</span>)</span><br><span class="line">y = torch.from_numpy(x)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/04/18/TF-GradientTape/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/18/TF-GradientTape/" itemprop="url">TF-GradientTape</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-18T10:39:25+08:00">
                2020-04-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  673
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在tf1.0的静态计算图中，梯度可以通过反向图计算。而在tf2.0的动态图中，没有了构建图的过程，需要上下文管理器来连接需要计算梯度的函数和变量。</p>
<p>tf.GradientTape是一个记录器，能够记录其上下文环境中的计算步骤，并自动求导。使用方法分为两步：<br>1.使用with语句，将需要求导的计算步骤封装在tf.GradientTape的上下文中；<br>2.使用tf.gradientTape的gradient方法计算导数。</p>
<h4 id="上下文"><a href="#上下文" class="headerlink" title="上下文"></a>上下文</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.Variable(initial_value=<span class="number">3.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">    y = tf.square(x)</span><br><span class="line">y_grad = tape.gradient(y,x)</span><br><span class="line">print([y, y_grad])</span><br></pre></td></tr></table></figure>
<p>with语句结束后大多数资源会被释放；但对于gradientTape来说，离开with语句意味着停止记录，并不会自动释放。<br>每个tf.GradientTape在调用一次gradient方法后，其记录的信息才会释放。<br>如果要阻止自动释放，需要指定persistent参数为True，并在使用结束后手动释放。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.GradientTape(persistent=<span class="keyword">True</span>) <span class="keyword">as</span> tape:</span><br><span class="line">    y = tf.square(x)</span><br><span class="line">y_grad = tape.gradient(y)</span><br><span class="line"><span class="keyword">del</span> tape</span><br></pre></td></tr></table></figure>
<h4 id="监视机制"><a href="#监视机制" class="headerlink" title="监视机制"></a>监视机制</h4><p>tf.gradientTape的上下文中，默认只将变量加入监视列表，从而自动求导。<br>如果要将常量加入，需要手动指定。<br>例如求取$y=x^2$在x=3处的导数：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.constant(<span class="number">3.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">    tape.watch(x)</span><br><span class="line">    y = tf.square(x)</span><br><span class="line">y_grad = tape.gradient(y, x)</span><br></pre></td></tr></table></figure>
<h4 id="高阶求导"><a href="#高阶求导" class="headerlink" title="高阶求导"></a>高阶求导</h4><p>tf.gradient支持嵌套使用，可以用来计算高阶导数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.Variable(<span class="number">3.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape_1:</span><br><span class="line">    <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape_2:</span><br><span class="line">        y = tf.square(x)</span><br><span class="line">    dy_dx = tape_2.gradient(y,x)</span><br><span class="line">d2y_dx2 = tape_1.gradient(dy_dx, x)</span><br></pre></td></tr></table></figure>
<h4 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h4><p>尽量只将需要求导的计算步骤放入tf.gradient的上下文中。<br>如果要加入一些无需记录求导的步骤，可以试用tape.stop_recording()来暂时停止记录。<br>同时，gradient方法本身也是计算步骤，若非高阶求导，不要将gradient放在tf.gradientTape的上下文中。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.Variable(<span class="number">3.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Gradient(persistent=<span class="keyword">True</span>) <span class="keyword">as</span> tape:</span><br><span class="line">    y = tf.square(x)</span><br><span class="line">    y_grad = tape.gradient(y,x)</span><br><span class="line">    <span class="keyword">with</span> tape.stop_recording(): <span class="comment">#无需记录的步骤</span></span><br><span class="line">        y_grad_not_recorded = tape.gradient(y,x)</span><br><span class="line">d2y_dx2 = tape.gradient(y_grad, x) <span class="comment">#二阶导数</span></span><br></pre></td></tr></table></figure>
<h4 id="使用tf-GradientTape求取最小值"><a href="#使用tf-GradientTape求取最小值" class="headerlink" title="使用tf.GradientTape求取最小值"></a>使用tf.GradientTape求取最小值</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.Variable(<span class="number">0.0</span>,name = <span class="string">"x"</span>,dtype = tf.float32)</span><br><span class="line">a = tf.constant(<span class="number">1.0</span>)</span><br><span class="line">b = tf.constant(<span class="number">-2.0</span>)</span><br><span class="line">c = tf.constant(<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">optimizer = tf.keras.optimizers.SGD(learning_rate=<span class="number">0.01</span>)</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">1000</span>):</span><br><span class="line">    <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">        y = a*tf.pow(x,<span class="number">2</span>) + b*x + c</span><br><span class="line">    dy_dx = tape.gradient(y,x)</span><br><span class="line">    optimizer.apply_gradients(grads_and_vars=[(dy_dx,x)])</span><br></pre></td></tr></table></figure>
<p>也可使使用optimizer.minimize()代替。<br>optimizer.minimize()相当于先用tape求gradient，在apply_gradient.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.Variable(<span class="number">0.0</span>,name = <span class="string">"x"</span>,dtype = tf.float32)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span>   </span><br><span class="line">    a = tf.constant(<span class="number">1.0</span>)</span><br><span class="line">    b = tf.constant(<span class="number">-2.0</span>)</span><br><span class="line">    c = tf.constant(<span class="number">1.0</span>)</span><br><span class="line">    y = a*tf.pow(x,<span class="number">2</span>)+b*x+c</span><br><span class="line">    <span class="keyword">return</span>(y)</span><br><span class="line"></span><br><span class="line">optimizer = tf.keras.optimizers.SGD(learning_rate=<span class="number">0.01</span>)   </span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">1000</span>):</span><br><span class="line">    optimizer.minimize(f,[x])</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/02/01/Unity-PostProcessing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/01/Unity-PostProcessing/" itemprop="url">Unity-PostProcessing</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-01T16:17:59+08:00">
                2020-02-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  298
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>Ambient Occlusion：环境光遮罩，使难以照射到光线的角落变暗</li>
<li>Anti Aliasing：抗锯齿，使锯齿感明显的边缘更加平滑，同时会使物体变得模糊</li>
<li>Auto Exposure：自动曝光，模拟人眼适应光亮变化的效果，比如从黑暗隧道出来时有短暂时间的炫目</li>
<li>Bloom：辉光，图像从明亮边缘扩散，常用1</li>
<li>Chromatic Aberration：色差，在边界产生一些颜色条纹</li>
<li>Color Grading：颜色分级，校正镜头中的颜色和亮度，类似手机滤镜，常用2</li>
<li>Deferred Fog：延时雾效，用于模拟室外环境中的雾</li>
<li>Depth of Field：景深，模拟相机镜头的对焦效果而产生模糊感，常用3</li>
<li>Grain：颗粒效果，模拟老电影屏幕上的颗粒感</li>
<li>Lens Distortion：镜头失真，通过扭曲图片来模拟镜头的形状</li>
<li>Motion Blur：运动模糊，模拟拍摄对象移动速度快于镜头曝光时间时的图像模糊，比如赛车游戏</li>
<li>Screen Space Reflection：屏幕空间反射，用于产生更微妙的反射，比如潮湿地板或水坑</li>
<li>Vignette：晕影，图像边缘逐渐变暗的效果</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/01/29/C#-QueueStack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/29/C#-QueueStack/" itemprop="url">队列Queue和堆栈Stack</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-29T17:31:24+08:00">
                2020-01-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  145
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h4><p><strong>属性</strong></p>
<ul>
<li>Count: 元素个数</li>
</ul>
<p><strong>方法</strong></p>
<ul>
<li>Enqueue(object obj): 向末尾添加对象</li>
<li>Dequeue(): 从开头移除对象</li>
<li>Contains(object obj): 判断是否在队列中</li>
<li>Clear(): 移除所有对象</li>
<li>ToArray(): 复制队列到新的数组中</li>
<li>TrimToSize(): 设置容量为队列中实际的对象个数</li>
</ul>
<h4 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h4><p><strong>属性</strong></p>
<ul>
<li>Count</li>
</ul>
<p><strong>方法</strong></p>
<ul>
<li>Push(object obj): 向堆栈顶部添加对象</li>
<li>Pop(): 移除并返回顶部的对象</li>
<li>Peek(): 返回顶部对象，但不移除它</li>
<li>Contains(object obj): 判断对象是否在堆栈中</li>
<li>Clear(): 移除所有元素</li>
<li>ToArray(): 复制堆栈到新的数组中</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/01/22/Unity-SendMessage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/22/Unity-SendMessage/" itemprop="url">SendMessage</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-22T17:02:17+08:00">
                2020-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  156
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Unity中的消息推送机制，实现的是一种伪监听者模式。<br>常用的函数有三个：</p>
<ul>
<li>SendMessage</li>
<li>SendMessageUpwards</li>
<li>BroadcastMessage</li>
</ul>
<h4 id="SendMessage"><a href="#SendMessage" class="headerlink" title="SendMessage"></a>SendMessage</h4><p>public void SendMessage(string methodName, object value=null, SendMessageOptions options=SendMessageOptions.RequireReceiver)</p>
<p>向当前gameobject推送一个消息，调用所有MonoBehaviour中的methodName方法。<br>如果该消息没有被任何组件接收处理，且options=SendMessageOptions.RequireReceiver，那么会报错。</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Caller</span>: <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        gameObject.SendMessage(<span class="string">"ApplyDamage"</span>, <span class="number">5.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Receiver</span>: <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ApplyDamage</span>(<span class="params"><span class="keyword">float</span> damage</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        print(damage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SendMessageUpwards"><a href="#SendMessageUpwards" class="headerlink" title="SendMessageUpwards"></a>SendMessageUpwards</h4><p>不仅会向当前gameobject推送消息，也会像其所有父对象推送消息。</p>
<h4 id="BroadcastMessage"><a href="#BroadcastMessage" class="headerlink" title="BroadcastMessage"></a>BroadcastMessage</h4><p>和SendMessageUpwards相反，向当前对象及所有子对象推送消息。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/01/17/Unity-Utility/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/17/Unity-Utility/" itemprop="url">Utility资源包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-17T09:42:50+08:00">
                2020-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  302
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Utility标准资源包里提供了多个功能脚本，是一个工具集合。</p>
<ul>
<li>ActivateTrigger: 由Trigger模式的Collider触发的多功能脚本</li>
<li>AutoMobileShaderSwitch: 当目标平台为手机平台时，将自身材质上使用的Shader替换为新的Shader</li>
<li>AutoMoveAndRotate: 控制gameObject的旋转和自动位移</li>
<li>CameraRefocus: Camera旋转角度的复位</li>
<li>CurveControlledBob: 以正弦速率晃动摄像机</li>
<li>DragRigidbody: 鼠标拖拽刚体</li>
<li>DynamiacShadowSettings: 动态改变实时阴影</li>
<li>EventSystemChecker: 检查是否存在EventSystem，若无则自动创建</li>
<li>FollowTarget: 使本gameObject跟随指定的gameObject</li>
<li>ForcedReset: 重新载入某个场景，用于控制游戏复位</li>
<li>FOVKick: 控制摄像机视角变化</li>
<li>FPSCounter: 显示当前游戏帧率</li>
<li>LerpControlledBob: 获取线性插值</li>
<li>ObjectResetter: 重置物体transform</li>
<li>ParticleSystemDestroyer: 延时后关闭粒子系统，然后销毁gameObject</li>
<li>PlatformSpecificContent: 针对特定平台启用GameObject和MonoBehaviour的功能</li>
<li>SimpleActivatorMenu: 循环激活一组物体，当一个物体激活时其他物体禁用</li>
<li>SimpleMouseRotator: 鼠标旋转摄像机，挂载Camera使用</li>
<li>SmoothFollow: 有阻尼的平滑跟随</li>
<li>TimedObjectActivator: 延时后启用、禁用、销毁、载入等多功能脚本</li>
<li>TimedObjectDestructor: 延时销毁object</li>
<li>WaypointCircuit: 将child的transform连接成一条轨迹</li>
<li>WaypointProgressTracker: 挂载Camera追踪轨迹</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/01/17/Unity-CrossPlatformInput/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/17/Unity-CrossPlatformInput/" itemprop="url">CrossPlatformInput</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-17T09:36:14+08:00">
                2020-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  144
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>跨平台输入工具包CrossPlatformInput，主要包括Prefabs和Scripts两个文件夹。</p>
<h5 id="CarTiltControls"><a href="#CarTiltControls" class="headerlink" title="CarTiltControls"></a>CarTiltControls</h5><p>用于赛车游戏的跨平台输入控制。<br>可选择用按钮、重力感应或鼠标控制Vertical和Horizontal输入值。</p>
<h5 id="DualTouchControls"><a href="#DualTouchControls" class="headerlink" title="DualTouchControls"></a>DualTouchControls</h5><p>多点触控情景下TouchPad脚本的使用，通过将不同区域的滑动数据映射到不同的虚拟轴来避免冲突。</p>
<h5 id="MobileAircraftControls"><a href="#MobileAircraftControls" class="headerlink" title="MobileAircraftControls"></a>MobileAircraftControls</h5><p>用于飞行器的跨平台输入控制。</p>
<h5 id="MobileSingleStickControl"><a href="#MobileSingleStickControl" class="headerlink" title="MobileSingleStickControl"></a>MobileSingleStickControl</h5><p>演示Joystick脚本的使用。</p>
<h5 id="MobileTiltControlRig"><a href="#MobileTiltControlRig" class="headerlink" title="MobileTiltControlRig"></a>MobileTiltControlRig</h5><p>在代码中通过CrossPlatformInputManager获取映射轴的值，输入来源重力感应或鼠标。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2020/01/17/Unity-Advertisement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/17/Unity-Advertisement/" itemprop="url">Advertisements</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-17T08:54:52+08:00">
                2020-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  215
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Unity-Ads"><a href="#Unity-Ads" class="headerlink" title="Unity Ads"></a>Unity Ads</h4><h6 id="静态成员"><a href="#静态成员" class="headerlink" title="静态成员"></a>静态成员</h6><ul>
<li>debugLevel: 指定日志输出量</li>
<li>gameId: 当前平台的游戏id</li>
<li>isInitialized: 广告系统是否初始化完成</li>
<li>isShowing: 广告是否正在播放</li>
<li>isSupported: 当前平台是否支持广告</li>
<li>testMode: 测试模式是否开启</li>
</ul>
<h6 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h6><ul>
<li>Initialize: 手动初始化广告系统</li>
<li>IsReady: 广告是否准备就绪</li>
<li>Show: 显示广告</li>
</ul>
<h6 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h6><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine.Advertisements</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowDefaultAd</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!Advertisement.IsReady())</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"Ads not ready"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowRewardedAd</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">string</span> RewardedZoneId = <span class="string">"rewardedVideo"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!Advertisement.IsReady(RewardedZoneId))</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="keyword">string</span>.Format(<span class="string">"Ads not ready for zone '&#123;0&#125;'"</span>, RewardedZoneId));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> options = <span class="keyword">new</span> ShowOptions &#123; resultCallback = HandleShowResult &#125;;</span><br><span class="line">    Advertisement.Show(RewardedZoneId, options);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">HandleShowResult</span>(<span class="params">ShowResult result</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(result)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> ShowResult.Finished:</span><br><span class="line">            Debug.Log(<span class="string">"Ad was successfully shown."</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ShowResult.Skipped:</span><br><span class="line">            Debug.Log(<span class="string">"Ad was skipped."</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ShowResult.Failed:</span><br><span class="line">            Debug.LogError(<span class="string">"Faied to show ad."</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="ShowOptions"><a href="#ShowOptions" class="headerlink" title="ShowOptions"></a>ShowOptions</h6><ul>
<li>gamerSid: Add a string to specify an identifier for a specific user in the game</li>
<li>resultCallback: Callback to recieve the result of the advertisement</li>
</ul>
<h6 id="ShowResult"><a href="#ShowResult" class="headerlink" title="ShowResult"></a>ShowResult</h6><p>Enum类型，共有3个值：</p>
<ul>
<li>Failed</li>
<li>Skipped</li>
<li>Finished</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/12/16/Unity-SpriteRenderer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/16/Unity-SpriteRenderer/" itemprop="url">SpriteRenderer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-16T22:15:45+08:00">
                2019-12-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  76
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="DrawMode"><a href="#DrawMode" class="headerlink" title="DrawMode"></a>DrawMode</h4><p>共3种：</p>
<ul>
<li>Simple</li>
<li>Sliced</li>
<li>Tiled</li>
</ul>
<p>当选择Sliced或者Tiled时，图片首先被裁成不同区域:<br><img src="/img/DrawMode_1.png"></p>
<p>四个角落ACGI的大小可以通过size指定，将保持不变。<br>若选择Sliced，BH将水平拉伸，DF将竖直拉伸：<br><img src="/img/DrawMode_2.png"></p>
<p>若选择Tiled，BH将水平重复，DF将竖直重复：<br><img src="/img/DrawMode_3.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/12/13/C#-Abstract/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/13/C#-Abstract/" itemprop="url">C#中的Abstract和Virtual</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-13T11:27:44+08:00">
                2019-12-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  198
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h4><p>Abstract可用于声明抽象类和抽象方法。<br>抽象类不能实例化，必须由派生类实现。<br>抽象方法只能存在于抽象类中.<br>抽象方法不能有方法实体，必须由派生类以override实现。</p>
<h4 id="Virtual"><a href="#Virtual" class="headerlink" title="Virtual"></a>Virtual</h4><p>Virtual用于声明虚方法。<br>派生类可以override覆盖基类虚方法，也可以不覆盖直接调用。<br>派生类覆盖时使用base可调用基类方法。<br>若无virtual标记，派生类覆盖基类方法时必须使用new。</p>
<p><strong>例子</strong><br><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Book</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">GetPrice</span>(<span class="params"></span>)</span>; <span class="comment">// 抽象方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">GetName</span>(<span class="params"></span>) <span class="comment">// 虚方法</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"default book name"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GetDate</span>(<span class="params"></span>) <span class="comment">// 一般方法</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"20191212"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TextBook</span>: <span class="title">Book</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">GetPrice</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"abstract override"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">GetName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">base</span>.GetName();</span><br><span class="line">        Console.WriteLine(<span class="string">"another name"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> new <span class="keyword">void</span> <span class="title">GetDate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"888999"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/11/23/Unity-Timeline/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/23/Unity-Timeline/" itemprop="url">Timeline</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-23T15:40:53+08:00">
                2019-11-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  71
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="轨道类型"><a href="#轨道类型" class="headerlink" title="轨道类型"></a>轨道类型</h4><ul>
<li>Animation: 播放Animation Clip或关键帧动画</li>
<li>Activation: 控制物体的激活状态</li>
<li>Audio: 播放音效</li>
<li>Control: 控制粒子或另一个Timeline的播放，例如用主Timeline控制封装好的子Timeline</li>
<li>Playable: 自定义播放行为</li>
<li>Cinemachine: 控制Cinamachine相机系统</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/11/20/Unity-Tilemap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/20/Unity-Tilemap/" itemprop="url">Tilemap</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-20T20:15:38+08:00">
                2019-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  275
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="系统组成"><a href="#系统组成" class="headerlink" title="系统组成"></a>系统组成</h4><ul>
<li>Grid: 类似UI Canvas，控制网格属性，是所有Tilemap的parent</li>
<li>Tilemap: 绘制Tile的地图，可以有多层，类似photoshop的layer</li>
<li>Tilemap Renderer: 控制Tile在Tilemap上的渲染，类似sprite renderer</li>
<li>Tile Palette: 保存Tile的画板，可以选择笔刷</li>
<li>Tile: 可用于绘制的图片，是sprite的引用，可以改变颜色</li>
</ul>
<h4 id="Collider"><a href="#Collider" class="headerlink" title="Collider"></a>Collider</h4><ul>
<li>Tilemap Collider 2D: 为Tilemap中的每个Tile生成一个collider，会有效率问题，并且交界处可能卡住物体</li>
<li>Composite Collider 2D: 将所有Tile的collider融合，得到一个代表整体的collider，会提高效率</li>
</ul>
<h4 id="2D-Extras"><a href="#2D-Extras" class="headerlink" title="2D Extras"></a>2D Extras</h4><p>开发者制作的插件，包括多种scriptable tiles 和scriptable brushes.<br><strong>scriptable tiles</strong></p>
<ul>
<li>Rule Tile: 根据规则自动替换Tile，从上到下执行</li>
<li>Random Tile: 从集合中随机选择Tile，例如生成多样的地表植被</li>
</ul>
<p><strong>scriptable brushes</strong></p>
<ul>
<li>cordinate brush: 在笔刷下方显示坐标</li>
<li>line brush: 画出一条线的tile</li>
<li>prefab brush: 将3D prefab绘制到2D tilemap中</li>
</ul>
<h4 id="2D画面投射到3D物体表面"><a href="#2D画面投射到3D物体表面" class="headerlink" title="2D画面投射到3D物体表面"></a>2D画面投射到3D物体表面</h4><ol>
<li>新建一个render texture</li>
<li>将texture拖到camera的target texture</li>
<li>新建一个material，shader选择Unlit/Texture</li>
<li>将material拖到3D物体表面</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/11/19/Unity-LayerMask/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/Unity-LayerMask/" itemprop="url">LayerMask</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-19T21:28:31+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  207
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Unity中每个GameObject都有Layer属性，默认都是Default(Layer 0)。<br>Layer最多有32个，其中前8个(0-7)系统自带，后24个(8-31)可由用户自定义。<br>最多32个是因为Unity中用int32来表示Layer层，推测使用二进制00..0010..00表示。<br>LayerMask实际上是对Layer的位码操作。</p>
<p><strong>位运算符</strong></p>
<ul>
<li>按位运算: ~, ^, &amp;, |</li>
<li>逻辑运算: &amp;&amp;, ||, !</li>
<li>位移运算: &lt;&lt;, &gt;&gt;</li>
</ul>
<p><strong>举例</strong><br>LayerMask mask = 1 &lt;&lt; 2 向左移动2位，表示开启Layer 2<br>LayerMask mask = 0 &lt;&lt; 5 表示关闭Layer 5<br>LayerMask mask = 1 &lt;&lt; 2 | 1 &lt;&lt; 8 表示开启Layer 2和Layer 8<br>LayerMask mask = 0 &lt;&lt; 3 | 0 &lt;&lt; 7 表示关闭Layer 3和Layer 7<br>LayerMask mask = ~(1 &lt;&lt; 3 | 1 &lt;&lt; 7) 表示关闭Layer 3和Layer 7<br>LayerMask mask = 1 &lt;&lt; 2 | 0 &lt;&lt; 4 表示开启Layer 2 同时关闭Layer 4</p>
<p><strong>代码</strong><br><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">LayerMask mask = ~(<span class="number">1</span>&lt;&lt;<span class="number">3</span>|<span class="number">1</span>&lt;&lt;<span class="number">7</span>)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Physics.Raycast(transform.position, transform.forward, <span class="number">100</span>, mask.<span class="keyword">value</span>))</span><br><span class="line">        Debug.Log(<span class="string">"Hit something"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/11/19/Unity-Cinemachine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/19/Unity-Cinemachine/" itemprop="url">Cinimachine相机系统</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-19T20:34:27+08:00">
                2019-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  357
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>游戏中的相机系统要解决的问题大约分为五类：跟踪、瞄准、物理相关(碰撞、遮挡)、镜头特效、镜头切换等。<br>Unity 2017版本之后引入了Cinemachine相机系统，为上述问题提供便利的解决方案。<br>Cinemachine核心组件包括Brain和Virtual Camera:</p>
<ul>
<li>Brain 作为组件附加在Camera上，实际控制Camera</li>
<li>Virtual Camera 虚拟相机可以存在多个，共同组成拍摄方案</li>
</ul>
<p><img src="\img\Cinemachine.png"></p>
<h5 id="模块组成"><a href="#模块组成" class="headerlink" title="模块组成"></a>模块组成</h5><p>虚拟相机主要由六个模块组成：</p>
<ul>
<li>Lens: 镜头视角FOV</li>
<li>Body: 处理场景中相机和目标之间的位置关系</li>
<li>Aim: 焦点和跟踪目标在镜头中的位置</li>
<li>Noise: 模拟晃动</li>
<li>后处理模块</li>
<li>Extensions: 碰撞处理</li>
</ul>
<h5 id="相机种类"><a href="#相机种类" class="headerlink" title="相机种类"></a>相机种类</h5><ul>
<li>FreeLook: 可以围绕目标水平和竖直转动，例如实现第三人称相机</li>
<li>BlendList</li>
<li>State-Driven: 把动画状态和相机绑定，当动画状态切换的时候，相机也同时切换</li>
<li>Clear Shot: 自动规避视线障碍，自动选择最佳拍摄位置</li>
<li>Target Group: 设置相机焦点到多个拍摄目标的中间，例如拍摄多人场景</li>
<li>2D: 用于2D场景</li>
</ul>
<h5 id="Timeline轨道"><a href="#Timeline轨道" class="headerlink" title="Timeline轨道"></a>Timeline轨道</h5><p>Cinemachine提供了Timeline轨道，可以使用Timeline管理场景中的虚拟相机</p>
<h5 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h5><ul>
<li>Dead Zone: 一般位于中央，角色在dead zone内移动时，镜头不会移动</li>
<li>Confiner: 镜头最大可移动的边界，以collider表示</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/11/05/Unity-Canvas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/05/Unity-Canvas/" itemprop="url">Canvas</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-05T22:54:00+08:00">
                2019-11-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  50
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Render-Modes"><a href="#Render-Modes" class="headerlink" title="Render Modes"></a>Render Modes</h4><h6 id="Screen-Space-Overlay"><a href="#Screen-Space-Overlay" class="headerlink" title="Screen Space - Overlay"></a>Screen Space - Overlay</h6><p>在所有Scene之上，适应屏幕尺寸。</p>
<h6 id="Screen-Space-Camera"><a href="#Screen-Space-Camera" class="headerlink" title="Screen Space - Camera"></a>Screen Space - Camera</h6><p>距离Camera一定距离，显示效果受Camera的设定影响。</p>
<h6 id="World-Space"><a href="#World-Space" class="headerlink" title="World Space"></a>World Space</h6><p>当做场景中的一个物体。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/10/28/Unity-BackgroundScroll/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/28/Unity-BackgroundScroll/" itemprop="url">Unity背景图片循环移动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-28T20:08:37+08:00">
                2019-10-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  82
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.背景图片<br>Texture Type 设为 Default;<br>Wrap Mode 设为 Repeat;<br>Apply</p>
<p>2.背景板<br>使用Quad;<br>将背景图片拖入背景板，Shader选择 Unlit/Texture</p>
<p>3.脚本<br>循环移动的原理是不断修改Texture的offset.<br><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">SerializeField</span>] <span class="keyword">float</span> backgroundScrollSpeed = <span class="number">0.05</span>f;</span><br><span class="line">Material myMaterial;</span><br><span class="line">Vector2 offSet;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    myMaterial = GetComponent&lt;Renderer&gt;().material;</span><br><span class="line">    offSet = <span class="keyword">new</span> Vector2(<span class="number">0</span>, backgroundScrollSpeed);   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    myMaterial.mainTextureOffset += offSet * Time.deltaTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/09/21/RL-ActorCritic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/21/RL-ActorCritic/" itemprop="url">演员-评论家算法Actor-Critic</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-21T15:02:49+08:00">
                2019-09-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  843
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="优势函数"><a href="#优势函数" class="headerlink" title="优势函数"></a>优势函数</h4><p>在策略梯度法中我们提到了两种改进，一是基准值，二是因果关系。<br>1.因果关系<br>在因果关系中使用了<strong>今后收益(reward-to-go)</strong>，即$\hat{Q}_{i,t} = \sum_{t’=t}^{T}r(s_{i,t’}, a_{i,t’})$。<br>这里$\hat{Q}_{i,t}$是单条轨迹的收益之和，方差较大；如果使用今后收益的期望，即$Q(s_t, a_t)$将降低方差，得到更好的估计量。<br>2.基准值<br>基准值同样采用今后收益的平均，即值函数$V^{\pi}(s_t)=E[Q^{\pi}(s_t,a_t)]$.<br>于是估计量变为<br>$$ \nabla_{\theta}J(\theta) = \frac{1}{N}\sum_{i=1}^{N}\sum_{t=1}^{T} [\nabla_{\theta} log\pi_{\theta}(a_{i,t}|s_{i,t}) A^{\pi}(s_t, a_t)]$$<br>其中$A^{\pi}(s_t,a_t) = Q^{\pi}(s_t,a_t) - V^{\pi}(s_t)$，称作优势函数(advantage function)。</p>
<h4 id="拟合Q、V、A"><a href="#拟合Q、V、A" class="headerlink" title="拟合Q、V、A"></a>拟合Q、V、A</h4><p>绝大多数演员-评论家算法都是去拟合值函数V。<br>这是因为$Q^{\pi}(s_t, a_t)$包含状态和行动两个维度，输入空间更大，需要更多的样本拟合。<br>而如果接受$Q^{\pi}(s_t, a_t) \approx r(s_t, a_t) + V^{\pi}(s_{t+1})$，那么优势函数也可以近似为<br>$$ A^{\pi}(s_t, a_t) \approx r(s_t, a_t) + V^{\pi}(s_{t+1}) - V^{\pi}(s_t) $$<br>而且由于目标函数$J(\theta) = E[V^{\pi}(s)]$，拟合值函数V的同时也能得到目标函数。<br>拟合的过程属于策略评估(policy-evaluation)。<br>可以使用蒙特卡洛方法，多次采样取平均；或者使用神经网络得到近似函数。<br>例如<strong>批量演员-评论家算法(batch actor-critic algorithm)</strong>:<br>1.根据策略收集一些样本；<br>2.根据样本拟合$V^{\pi}_{\phi}(s)$<br>3.评估优势函数$A^{\pi}(s_i, a_i) = r(s_i,a_i) + V^{\pi}_{\phi}(s_i’) - V^{\pi}_{\phi}(s_i)$<br>4.计算梯度$\nabla_{\theta}J(\theta) \approx \sum_{t=1}^{T}[\nabla_{\theta}log\pi_{\theta}(a_t|s_t)A^{\pi}(s_t, a_t)]$<br>5.更新参数$\theta \leftarrow \theta + \alpha\nabla(\theta)J(\theta)$</p>
<h4 id="贴现因子"><a href="#贴现因子" class="headerlink" title="贴现因子"></a>贴现因子</h4><p>对有无限时间周期的问题，引入贴现因子(discount factor)，将未来的数值折现。<br>贴现因子$\gamma$通常取0.99，相当于每一步都有0.01的可能直接结束马尔科夫过程。<br>引入后<br>$$ A^{\pi}(s_t, a_t) \approx r(s_t, a_t) + \gamma V^{\pi}(s_{t+1}) - V^{\pi}(s_t) $$</p>
<h4 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h4><p>现在我们需要两个网络：</p>
<ul>
<li>从状态s映射到策略$\pi(a|s)$</li>
<li>从状态s映射到拟合的值函数$V^{\pi}_{\phi}(s)$</li>
</ul>
<p>将两个网络独立，形式简单而稳定，但计算量会较大；<br>将两个网络整合到一起——例如输入是图像，两个网络在低层次的中间数据是可以共享的——使用1个输入和2个输出可以降低计算量。但是这种网络训练难度较大，因为策略梯度和回归梯度可能会向不同的方向调整参数，需要更多的调试技巧。<br>Actor-Critic同样是一个on-policy的方法，更新后需要重新采样。如果使用多个智能体收集样本数据，更新方式分为：</p>
<ul>
<li>同步(synchronized)：多个智能体分别走一步收集数据，然后更新策略；全部更新完成后，智能体再走下一步</li>
<li>异步(asynchronous)：移除同步点，智能体收集数据和中央服务器更新参数可以异步进行</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/09/14/Unity-Singleton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/14/Unity-Singleton/" itemprop="url">DontDestroyOnLoad</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-14T14:37:52+08:00">
                2019-09-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  198
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>加载新场景时，阻止摧毁旧场景的game object。所有的子对象同时被保留。<br>可用于实现单例模式：</p>
<ul>
<li>第一个实例保留，不摧毁</li>
<li>后续检测总个数，摧毁多余实例</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GameObject[] objs = FindGameObjectsWithTag(<span class="string">"music"</span>);</span><br><span class="line">    <span class="keyword">if</span> (objs.Length &gt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">	<span class="comment">// gameObject.SetActive(false); 摧毁需要时间，完成前设置为不可用</span></span><br><span class="line">        Destory(<span class="keyword">this</span>.gameObject);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        DontDestroyOnLoad(<span class="keyword">this</span>.gameObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在Unity中，一种是继承MonoBehaviour的单例，一种是普通单例。</p>
<h6 id="MonoBehavior单例"><a href="#MonoBehavior单例" class="headerlink" title="MonoBehavior单例"></a>MonoBehavior单例</h6><p>只需要在Awake()里添加一句 instance = this</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MonoSingleton</span>: <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MonoSingleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        instance = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="普通类的单例"><a href="#普通类的单例" class="headerlink" title="普通类的单例"></a>普通类的单例</h6><p>```csharp<br>public class Singleton {<br>    private static Singleton instance;<br>    public static Singleton Instance<br>    {<br>        get {<br>            if (null == instance)<br>                instance = new Singleton();<br>            return instance;<br>            }<br>    }<br>}</p>
<p>另外，如果项目中有多个单例，可以封装一个单例类，每次从这个单例类继承。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mirokule.github.io/2019/09/14/Unity-Time/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Miles">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gate of Babylon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/14/Unity-Time/" itemprop="url">Time</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-14T14:03:11+08:00">
                2019-09-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  124
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Time-timeScale"><a href="#Time-timeScale" class="headerlink" title="Time.timeScale"></a>Time.timeScale</h4><p>时间流逝速度，1代表正常速度。<br>除了 realtimeSinceStartup 属性外，所有时间相关变量都会受影响。<br>当修改timeScale时，推荐同时修改 Time.fixedDeltaTime.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Input.GetButtonDown(<span class="string">"Fire1"</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        Time.timeScale = <span class="number">0.7</span>f;</span><br><span class="line">        Time.fixedDeltaTime = <span class="number">0.02</span>f * Time.timeScale;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Time-deltaTime"><a href="#Time-deltaTime" class="headerlink" title="Time.deltaTime"></a>Time.deltaTime</h4><p>当前帧和上一帧的时间差。<br>用移动速度乘以deltaTime可以使物体运动速度不受帧率影响。<br>FixedDeltaTime()中使用的是fixedDeltaTime.</p>
<h4 id="Time-timeSinceLevelLoad"><a href="#Time-timeSinceLevelLoad" class="headerlink" title="Time.timeSinceLevelLoad"></a>Time.timeSinceLevelLoad</h4><p>从当前Scene载入开始到目前为止的时间</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Miles" />
            
              <p class="site-author-name" itemprop="name">Miles</p>
              <p class="site-description motion-element" itemprop="description">万人迷</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">230</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/mirokule" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:miles.miro@gmail.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.kaggle.com/" title="Kaggle" target="_blank">Kaggle</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://unity3d.com/" title="Unity" target="_blank">Unity</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.apple.com/swift/" title="Swift" target="_blank">Swift</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">M.M.Tech</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">98.8k</span>
  
</div>










        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>
